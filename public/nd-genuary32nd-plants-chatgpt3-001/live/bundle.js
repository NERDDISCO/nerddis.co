/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";const t=(t,e,n,o=!0)=>o?Math.floor(t*(n-e+1)+e):t*(n-e)+e,e=(e,o,a,l,i=!0,s=!1,r=null,h=null)=>{const d=[];let u=0;for(let c=0;c<o;c++){u=0;let o=t(e.next(),a,l,i);if(null!==r&&(o=+o.toFixed(r)),s)for(;d.includes(o)||n(d,o,h);)if(o=t(e.next(),a,l,i),null!==r&&(o=+o.toFixed(r)),u++,u>50){u=0;break}d.push(o)}return d};function n(t,e,n,o=2){let a=!1;for(let l=0;l<t.length;l++){let i=t[l],s=Math.abs(i-e);if(s=+s.toFixed(o),s<=n){a=!0;break}}return a}const o=new class{constructor(){}next(){return fxrand()}list({size:t,fillWith:e=null,unique:n=!1,precision:o=null}){const a=[];if(null===e)for(let e=0;e<t;e++){let t=this.next();if(null!==o&&(t=+t.toFixed(o)),n)for(;a.includes(t);)t=this.next(),t=+t.toFixed(o);a.push(t)}else for(let n=0;n<t;n++)a.push(e);return a}},a=new class{constructor({}){this.canvas=document.querySelector("canvas#nd-output"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.resizeCanvasToSquare(),window.addEventListener("resize",(()=>{this.resizeCanvasToSquare()})),window._downloadSource=this.canvas,document.addEventListener("keydown",(t=>{(t.isComposing||"KeyS"===t.code)&&window.downloadPreview()})),window.downloadPreview=()=>{let t=document.createElement("a");t.download=fxhash,t.href=window._downloadSource.toDataURL(),document.body.appendChild(t),t.click(),document.body.removeChild(t)}}resizeCanvasToSquare(){const t=Math.min(window.innerWidth,window.innerHeight);this.canvas.width=t,this.canvas.height=t}}({}),{canvas:l,ctx:i}=a;!function({ctx:n,canvas:o,prng:a}){const l=2048;let i=null;console.log(fxhash);const s=function(t,e){let n=[],o=360*t;for(let t=0;t<14;t++)n.push(`hsl(${(o+360*t/14)%360}, 80%, 60%)`);return n}(a.next()),[r,h,d,u,c,p,x,m,w,f,g,M,S,A]=s,F=(t(a.next(),.5,2,!1),t(a.next(),350,600,!1)),R=t(a.next(),0,1,!1),y=t(a.next(),.01,.1,!1),v=[a.next(),a.next(),a.next()],b=[],C=t(a.next(),1,8,!0),T=t(a.next(),2,4,!0),G=e(a,C,T,C+T,!0,!0),H=t(a.next(),.5,.7,!1),P=e(a,C,.1,H,!1,!0,2,.05),I={x:0,y:1,startTime:0,stemHeight:0,stemWidth:0,stemMaxHeight:0,stemGrowthSpeed:0,stemColor:f,leafSize:0,leafPosition:.65,centerRadius:0,centerMaxRadius:0,centerColor:r,centerGrowthSpeed:0,centerRadiusFinal:0,petalColor:h,petalAmount:0,petalRadius:0,petalMaxRadius:0,petalAngle:Math.PI/1.5,petalGrowthSpeed:0,petalOperation:v[0]},q=function({amount:t}){const e=[],n=1/t;for(let o=1;o<=t;o++)e.push({x:o*n-n/2});return e}({amount:C});for(let t=0;t<C;t++)z({plants:b,y:1-y,x:q[t].x,petalAmount:G[t],petalAmountsMin:T,plantsAmount:C,stemMaxHeight:P[t],isFirst:0===t&&2!==C&&3!==C,isLast:t===C-1&&2!==C&&3!==C,isTheOne:1===C});function z({plants:e,plantsAmount:n,x:o,y:l,petalAmount:i,petalAmountsMin:s,stemMaxHeight:w,isFirst:g,isLast:M,isTheOne:S}){const A={...I},[F,R]=function(t){let e=t[Math.floor(a.next()*t.length)],n=t[Math.floor(a.next()*t.length)];for(;e===n;)n=t[Math.floor(a.next()*t.length)];return[n,e]}([r,h,d,u,c,p,x,m]);A.startTime=t(a.next(),0,2e3,!1),A.stemWidth=t(a.next(),20,25),A.stemMaxHeight=w,A.petalAmount=i,A.petalAmountThreshold=n+s,S||!g&&!M?(A.centerMaxRadius=t(a.next(),120,140),A.petalMaxRadius=t(a.next(),120,130),A.petalAmount=t(a.next(),s,n+s),A.petalAmountThreshold=100):!g&&!M||S||(A.centerMaxRadius=t(a.next(),30,50),A.petalMaxRadius=t(a.next(),20,35)),A.stemColor=O(f,t(a.next(),30,60)),A.centerColor=O(F,t(a.next(),60,80)),A.petalColor=O(R,t(a.next(),90,100)),A.stemGrowthSpeed=t(a.next(),.1,.5,!1),A.leafSize=t(a.next(),A.stemWidth+20,A.stemWidth+50),A.centerGrowthSpeed=t(a.next(),.05,.075,!1),A.petalGrowthSpeed=t(a.next(),.0125,.025,!1),A.petalAngle=t(a.next(),0,180)*Math.PI/180,A.y=l,A.x=o,e.push(A)}function $(t){let e=t-D;D=t,n.clearRect(0,0,o.width,o.height),function({groundHeight:t=.05,colorGrass:e="lightgreen",colorSky:a="lightblue",colorGround:l="#8B4513"}){let i=n.createLinearGradient(0,o.height*(1-t),0,0);i.addColorStop(0,e),i.addColorStop(1,a),n.fillStyle=i,n.fillRect(0,0,o.width,o.height*(1-t)),n.fillStyle=l,n.fillRect(0,o.height*(1-t),o.width,o.height*t),function(t){let e=n.getImageData(0,0,o.width,o.height);const a=e.data;for(let e=0;e<a.length;e+=4){let n=a[e],o=a[e+1],l=a[e+2],i=(n+o+l)/3;a[e]=i+(n-i)*t,a[e+1]=i+(o-i)*t,a[e+2]=i+(l-i)*t}n.putImageData(e,0,0)}(.25)}({colorGrass:g,colorGround:S,colorSky:M,groundHeight:y}),function({x:t,y:e,radius:a,colorSun:i="yellow"}){const s=a/l*o.width;n.fillStyle=i,n.beginPath(),n.arc(t*o.width,e*o.height,s,0,2*Math.PI),n.fill()}({x:R,y:0,radius:F,colorSun:A}),n.globalAlpha=1;for(const o of b)t>=o.startTime&&k(o,e)&&(n.globalAlpha=.75,L(o,e),n.globalAlpha=1,W(o,e));n.globalAlpha=1,i=requestAnimationFrame($)}function k(t,e){n.fillStyle=t.stemColor||"rgba(255, 255, 255, .25)";let a=t.stemWidth/l*o.width,i=t.stemHeight/2048*o.height;n.fillRect(t.x*o.width-a/2,t.y*o.height-i,a,i);let s=t.y*o.height-i*(1-t.leafPosition),r=t.leafSize/l*o.width;return n.beginPath(),n.moveTo(t.x*o.width,s),n.lineTo(t.x*o.width-r,s-r/2),n.lineTo(t.x*o.width+r,s-r/2),n.fill(),i<2048*t.stemMaxHeight/l*o.width?(t.stemHeight+=t.stemGrowthSpeed*e,!1):(t.stemHeightFinal=i,!0)}function W(t,e){n.fillStyle=t.centerColor||"yellow";let a=t.centerRadius/l*o.width;n.beginPath(),n.arc(t.x*o.width,t.y*o.height-t.stemHeightFinal,a,0,2*Math.PI),n.fill(),t.centerRadius<t.centerMaxRadius&&(t.centerRadius+=t.centerGrowthSpeed*e),t.centerRadiusFinal=a}function L(t,e){let a="source-over";t.petalAmount>=t.petalAmountThreshold&&(a="xor"),n.globalCompositeOperation=a,n.fillStyle=t.petalColor||"pink";let i=t.petalRadius/l*o.width;for(let e=0;e<t.petalAmount;e++)n.beginPath(),n.arc(t.x*o.width+(i+t.centerRadiusFinal/2)*Math.cos(t.petalAngle+e*Math.PI/(t.petalAmount/2)),t.y*o.height-t.stemHeightFinal+(i+t.centerRadiusFinal/2)*Math.sin(t.petalAngle+e*Math.PI/(t.petalAmount/2)),i,0,2*Math.PI),n.fill();t.petalRadius<t.petalMaxRadius&&(t.petalRadius+=t.petalGrowthSpeed*e),n.globalCompositeOperation="source-over"}function O(t,e){const[n,o,a]=t.match(/hsl\(\s*(\d+\.?\d*)\s*,\s*(\d+\.?\d*)%\s*,\s*(\d+\.?\d*)%\s*\)/).slice(1).map(Number);return`hsl(${n}, ${e}%, ${a}%)`}let D=0,E=0,_=0,B=0;i=requestAnimationFrame($);const K=()=>{E=t(a.next(),25,1e3,!0),_=t(a.next(),.05,25,!0),B=Math.floor(E*_),function(t){const{plants:e,baseMs:n,redrawFactor:o,redrawInMs:a}=t,l="nothing here yet";window.$fxhashFeatures={redrawInMs:a,redrawFactor:o,baseMs:n,plant1:l,plant2:l,plant3:l,plant4:l,plant6:l,plant7:l,plant8:l};for(let t=0;t<e.length;t++)window.$fxhashFeatures[`plant${t+1}`]=void 0!==e[t]?"<3":l}({plants:b,plantsAmount:C,redrawFactor:_,redrawInMs:B,baseMs:E}),console.log({plants:b}),console.log(window.$fxhashFeatures)},N=()=>{window.cancelAnimationFrame(i);for(const e of b)e.stemHeight=0,e.petalRadius=0,e.centerRadius=0,e.stemGrowthSpeed=t(a.next(),.1,.5,!1);K(),i=requestAnimationFrame($),setTimeout(N,B)};K(),isFxpreview?setTimeout((()=>{fxpreview()}),26e3):setTimeout(N,B)}({ctx:i,canvas:l,prng:o});const s=()=>{isFxpreview,window.requestAnimationFrame(s)};s()})();