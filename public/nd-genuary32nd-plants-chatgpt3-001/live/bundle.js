/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";const e=(e,t,n,a=!0)=>a?Math.floor(e*(n-t+1)+t):e*(n-t)+t,t=(t,a,o,i,l=!0,s=!1,r=null,h=null)=>{const d=[];let u=0;for(let c=0;c<a;c++){u=0;let a=e(t.next(),o,i,l);if(null!==r&&(a=+a.toFixed(r)),s)for(;d.includes(a)||n(d,a,h);)if(a=e(t.next(),o,i,l),null!==r&&(a=+a.toFixed(r)),u++,u>50){u=0;break}d.push(a)}return d};function n(e,t,n,a=2){let o=!1;for(let i=0;i<e.length;i++){let l=e[i],s=Math.abs(l-t);if(s=+s.toFixed(a),s<=n){o=!0;break}}return o}const a=new class{constructor(){}next(){return fxrand()}list({size:e,fillWith:t=null,unique:n=!1,precision:a=null}){const o=[];if(null===t)for(let t=0;t<e;t++){let e=this.next();if(null!==a&&(e=+e.toFixed(a)),n)for(;o.includes(e);)e=this.next(),e=+e.toFixed(a);o.push(e)}else for(let n=0;n<e;n++)o.push(t);return o}},o=new class{constructor({}){this.canvas=document.querySelector("canvas#nd-output"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.resizeCanvasToSquare(),window.addEventListener("resize",(()=>{this.resizeCanvasToSquare()})),window._downloadSource=this.canvas,document.addEventListener("keydown",(e=>{(e.isComposing||"KeyS"===e.code)&&window.downloadPreview()})),window.downloadPreview=()=>{let e=document.createElement("a");e.download=fxhash,e.href=window._downloadSource.toDataURL(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}resizeCanvasToSquare(){const e=Math.min(window.innerWidth,window.innerHeight);this.canvas.width=e,this.canvas.height=e}}({}),{canvas:i,ctx:l}=o;!function({ctx:n,canvas:a,prng:o}){const i=2048;let l=null,s=0,r=0,h=0,d=0;const u=function(e,t){let n=[],a=360*e;for(let e=0;e<14;e++)n.push(`hsl(${(a+360*e/14)%360}, 80%, 60%)`);return n}(o.next()),[c,x,p,m,w,f,g,M,S,A,R,F,y,v]=u,C=e(o.next(),.35,.55,!1),H=e(o.next(),350,600,!1),b=e(o.next(),0,1,!1),G=e(o.next(),.01,.1,!1),T=[],P=e(o.next(),1,8,!0),q=e(o.next(),2,4,!0),I=t(o,P,q,P+q,!0,!0),$=e(o.next(),.5,.7,!1),z=t(o,P,.2,$,!1,!0,2,.05),k={x:0,y:1,startTime:0,stemHeight:0,stemWidth:0,stemMaxHeight:0,stemGrowthSpeed:0,stemColor:A,leafSize:0,leafPosition:0,centerRadius:0,centerMaxRadius:0,centerColor:c,centerGrowthSpeed:0,centerRadiusFinal:0,petalColor:x,petalAmount:0,petalRadius:0,petalMaxRadius:0,petalAngle:0,petalGrowthSpeed:0},W=function({amount:e}){const t=[],n=1/e;for(let a=1;a<=e;a++)t.push({x:a*n-n/2});return t}({amount:P});for(let e=0;e<P;e++)L({plants:T,y:1-G,x:W[e].x,petalAmount:I[e],petalAmountsMin:q,plantsAmount:P,stemMaxHeight:z[e],isFirst:0===e&&2!==P&&3!==P,isLast:e===P-1&&2!==P&&3!==P,isTheOne:1===P});function L({plants:t,plantsAmount:n,x:a,y:i,petalAmount:l,petalAmountsMin:s,stemMaxHeight:r,isFirst:h,isLast:d,isTheOne:u}){const S={...k},[R,F]=function(e){let t=e[Math.floor(o.next()*e.length)],n=e[Math.floor(o.next()*e.length)];for(;t===n;)n=e[Math.floor(o.next()*e.length)];return[n,t]}([c,x,p,m,w,f,g,M]);S.startTime=e(o.next(),0,2e3,!1),S.stemWidth=e(o.next(),20,25),S.stemMaxHeight=r,S.petalAmount=l,S.petalAmountThreshold=n+s;let y=2.5;h||d?!h&&!d||u?u&&(S.centerMaxRadius=e(o.next(),150,170),S.petalMaxRadius=e(o.next(),150,160),S.stemMaxHeight=e(o.next(),.4,$,!1),S.petalAmount=e(o.next(),s,n+s),S.petalAmountThreshold=100):(S.centerMaxRadius=e(o.next(),30,50),S.petalMaxRadius=e(o.next(),20,35),y=1):(S.centerMaxRadius=e(o.next(),120,140),S.petalMaxRadius=e(o.next(),120,130),S.petalAmount=e(o.next(),s,n+s)),S.stemColor=K(A,e(o.next(),30,40)),S.centerColor=K(R,e(o.next(),60,80)),S.petalColor=K(F,e(o.next(),90,100)),S.stemGrowthSpeed=e(o.next(),.1,.5,!1),S.centerGrowthSpeed=e(o.next(),.05,.075,!1),S.petalGrowthSpeed=e(o.next(),.0125,.025,!1),S.leafPosition=e(o.next(),.65,1,!1),S.leafSize=e(o.next(),S.stemWidth+20*y,S.stemWidth+50*y),S.petalAngle=e(o.next(),0,180)*Math.PI/180,S.y=i,S.x=a,t.push(S)}function O(e){let t=e-s;if(s=e,t>68)l=requestAnimationFrame(O);else{n.clearRect(0,0,a.width,a.height),function({groundHeight:e=.05,colorGrass:t="lightgreen",colorSky:o="lightblue",colorGround:i="#8B4513"}){let l=n.createLinearGradient(0,a.height*(1-e),0,0);l.addColorStop(0,t),l.addColorStop(1,o),n.fillStyle=l,n.fillRect(0,0,a.width,a.height*(1-e)),n.fillStyle=i,n.fillRect(0,a.height*(1-e),a.width,a.height*e),B(.25)}({colorGrass:R,colorGround:y,colorSky:F,groundHeight:G}),function({x:e,y:t,radius:o,colorSun:l="yellow"}){const s=o/i*a.width;n.fillStyle=l,n.beginPath(),n.arc(e*a.width,t*a.height,s,0,2*Math.PI),n.fill()}({x:b,y:0,radius:H,colorSun:v}),B(C),n.globalAlpha=1;for(const a of T)e>=a.startTime&&(D(a,t),a.reachedMaxHeight&&(a.reachedMaxHeight=!0,n.globalAlpha=.75,_(a,t),n.globalAlpha=1,E(a,t)));n.globalAlpha=1,l=requestAnimationFrame(O)}}function D(e,t){n.fillStyle=e.stemColor||"rgba(255, 255, 255, .25)";let o=e.stemWidth/i*a.width,l=e.stemHeight/2048*a.height;n.fillRect(e.x*a.width-o/2,e.y*a.height-l,o,l);let s=e.y*a.height-l*(1-e.leafPosition),r=e.leafSize/i*a.width;n.beginPath(),n.moveTo(e.x*a.width,s),n.lineTo(e.x*a.width-r,s-r/2),n.lineTo(e.x*a.width+r,s-r/2),n.fill(),l<2048*e.stemMaxHeight/i*a.width?e.stemHeight+=e.stemGrowthSpeed*t:e.reachedMaxHeight=!0,e.stemHeightFinal=l}function E(e,t){n.fillStyle=e.centerColor||"yellow";let o=e.centerRadius/i*a.width;n.beginPath(),n.arc(e.x*a.width,e.y*a.height-e.stemHeightFinal,o,0,2*Math.PI),n.fill(),e.centerRadius<e.centerMaxRadius&&(e.centerRadius+=e.centerGrowthSpeed*t),e.centerRadiusFinal=o}function _(e,t){let o="source-over";e.petalAmount>=e.petalAmountThreshold&&(o="xor"),n.globalCompositeOperation=o,n.fillStyle=e.petalColor||"pink";let l=e.petalRadius/i*a.width;for(let t=0;t<e.petalAmount;t++)n.beginPath(),n.arc(e.x*a.width+(l+e.centerRadiusFinal/2)*Math.cos(e.petalAngle+t*Math.PI/(e.petalAmount/2)),e.y*a.height-e.stemHeightFinal+(l+e.centerRadiusFinal/2)*Math.sin(e.petalAngle+t*Math.PI/(e.petalAmount/2)),l,0,2*Math.PI),n.fill();e.petalRadius<e.petalMaxRadius&&(e.petalRadius+=e.petalGrowthSpeed*t),n.globalCompositeOperation="source-over"}function B(e){let t=n.getImageData(0,0,a.width,a.height);const o=t.data;for(let t=0;t<o.length;t+=4){let n=o[t],a=o[t+1],i=o[t+2],l=(n+a+i)/3;o[t]=l+(n-l)*e,o[t+1]=l+(a-l)*e,o[t+2]=l+(i-l)*e}n.putImageData(t,0,0)}function K(e,t){const[n,a,o]=e.match(/hsl\(\s*(\d+\.?\d*)\s*,\s*(\d+\.?\d*)%\s*,\s*(\d+\.?\d*)%\s*\)/).slice(1).map(Number);return`hsl(${n}, ${t}%, ${o}%)`}l=requestAnimationFrame(O);const N=()=>{r=e(o.next(),25,1e3,!0),h=e(o.next(),.05,50,!0),d=Math.floor(r*h),console.log(`redraw in ${d}ms`)},U=()=>{window.cancelAnimationFrame(l);for(const t of T)t.reachedMaxHeight=!1,t.stemHeight=0,t.petalRadius=0,t.centerRadius=0,t.stemGrowthSpeed=e(o.next(),.1,.5,!1),t.centerGrowthSpeed=e(o.next(),.05,.075,!1),t.petalGrowthSpeed=e(o.next(),.0125,.025,!1);N(),l=requestAnimationFrame(O),setTimeout(U,d)};console.log(fxhash),N(),function(e){const{plants:t,baseMs:n,redrawFactor:a,redrawInMs:o}=e,i="nothing here yet";window.$fxhashFeatures={redrawInMs:o,plant1:i,plant2:i,plant3:i,plant4:i,plant6:i,plant7:i,plant8:i};for(let e=0;e<t.length;e++)window.$fxhashFeatures[`plant${e+1}`]=void 0!==t[e]?"<3":i}({plants:T,redrawInMs:d}),console.log("$fxhashFeatures",window.$fxhashFeatures),isFxpreview?setTimeout((()=>{fxpreview()}),51e3):setTimeout(U,d)}({ctx:l,canvas:i,prng:a});const s=()=>{isFxpreview,window.requestAnimationFrame(s)};s()})();