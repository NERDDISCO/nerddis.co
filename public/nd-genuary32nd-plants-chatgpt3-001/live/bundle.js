(()=>{"use strict";const e=(e,t,n,o=!0)=>o?Math.floor(e*(n-t+1)+t):e*(n-t)+t,t=(t,o,a,i,l=!0,s=!1,r=null,h=null)=>{const u=[];let d=0;for(let c=0;c<o;c++){d=0;let o=e(t.next(),a,i,l);if(null!==r&&(o=+o.toFixed(r)),s)for(;u.includes(o)||n(u,o,h);)if(o=e(t.next(),a,i,l),null!==r&&(o=+o.toFixed(r)),d++,d>50){d=0;break}u.push(o)}return u};function n(e,t,n,o=2){let a=!1;for(let i=0;i<e.length;i++){let l=e[i],s=Math.abs(l-t);if(s=+s.toFixed(o),s<=n){a=!0;break}}return a}const o=e=>{const{ranges:t,currentValue:n}=e;let o="";return t.every((e=>{const t=Object.keys(e)[0],a=e[t][0],i=e[t][1];return!(n>=a&&n<=i&&(o=t,1))})),o},a=new class{constructor(){}next(){return fxrand()}list({size:e,fillWith:t=null,unique:n=!1,precision:o=null}){const a=[];if(null===t)for(let t=0;t<e;t++){let e=this.next();if(null!==o&&(e=+e.toFixed(o)),n)for(;a.includes(e);)e=this.next(),e=+e.toFixed(o);a.push(e)}else for(let n=0;n<e;n++)a.push(t);return a}},i=new class{constructor({}){this.canvas=document.querySelector("canvas#nd-output"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.resizeCanvasToSquare(),window.addEventListener("resize",(()=>{this.resizeCanvasToSquare()})),window._downloadSource=this.canvas,document.addEventListener("keydown",(e=>{(e.isComposing||"KeyS"===e.code)&&window.downloadPreview()})),window.downloadPreview=()=>{let e=document.createElement("a");e.download=fxhash,e.href=window._downloadSource.toDataURL(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}resizeCanvasToSquare(){const e=Math.min(window.innerWidth,window.innerHeight);this.canvas.width=e,this.canvas.height=e}}({}),{canvas:l,ctx:s}=i;!function({ctx:n,canvas:a,prng:i}){const l=2048;let s=null,r=0,h=0,u=0,d=0;const c=function(e,t){let n=[],o=360*e;for(let e=0;e<14;e++)n.push(`hsl(${(o+360*e/14)%360}, 80%, 60%)`);return n}(i.next());let[p,x,m,g,f,w,M,A,y,S,v,R,b,F]=c;const C=e(i.next(),18,20);let H=e(i.next(),25,65);const T=o({currentValue:H,ranges:[{rainbowNight:[25,26]},{sunnyDay:[26,65]}]});let I;if("sunnyDay"===T&&(H=e(i.next(),55,65)),F=_(F,C,H),R=_(R,C,H),v=_(v,C,H),b=_(b,C,H),"rainbowNight"===T){I=function(e){let t=0;const n=[];for(let e=0;e<14;e++)n.push(`hsl(${t}, 100%, 50%)`),t+=25.714285714285715;return n}();for(let e=0;e<I.length;e++)I[e]=_(I[e],C,H)}const G=e(i.next(),350,500,!1),P=e(i.next(),0,1,!1),q=e(i.next(),.01,.1,!1);let $=[];const k=e(i.next(),1,8,!0),W=e(i.next(),2,4,!0),z=t(i,k,W,k+W,!0,!0),L=e(i.next(),.45,.65,!1),O=t(i,k,.35,L,!1,!0,2,.05),N={x:0,y:1,startTime:0,stemHeight:0,stemWidth:0,stemMaxHeight:0,stemGrowthSpeed:0,stemColor:S,leafSize:0,leafPosition:0,centerRadius:0,centerMaxRadius:0,centerColor:p,centerGrowthSpeed:0,centerRadiusFinal:0,petalAlpha:.75,petalColor:x,petalAmount:0,petalRadius:0,petalMaxRadius:0,petalAngle:0,petalGrowthSpeed:0,isSpecial:!1},D=function({amount:e}){const t=[],n=1/e;for(let o=1;o<=e;o++)t.push({x:o*n-n/2});return t}({amount:k});for(let e=0;e<k;e++)V({plants:$,y:1-q,x:D[e].x,petalAmount:z[e],petalAmountsMin:W,plantsAmount:k,stemMaxHeight:O[e],isFirst:0===e&&2!==k&&3!==k,isLast:e===k-1&&2!==k&&3!==k,isTheOne:1===k});function E(e){let t=e-r;if(r=e,t>68)s=requestAnimationFrame(E);else{n.clearRect(0,0,a.width,a.height),function({groundHeight:e=.05,colorGrass:t="lightgreen",colorSky:o="lightblue",colorGround:i="#8B4513",colors:l}){let s=n.createLinearGradient(0,a.height*(1-e),0,0);if(void 0!==l)for(let e=0;e<l.length;e++)s.addColorStop(e/(l.length-1),l[e]);else s.addColorStop(0,t),s.addColorStop(1,o);n.fillStyle=s,n.fillRect(0,0,a.width,a.height*(1.05-e)),n.fillStyle=i,n.fillRect(0,a.height*(1-e),a.width,a.height*e)}({colorGrass:v,colorGround:b,colorSky:R,groundHeight:q,colors:I}),function({x:e,y:t,radius:o,colorSun:i="yellow"}){const s=o/l*a.width;n.fillStyle=i,n.beginPath(),n.arc(e*a.width,t*a.height,s,0,2*Math.PI),n.fill()}({x:P,y:0,radius:G,colorSun:F}),n.globalAlpha=1;for(const o of $)e>=o.startTime&&(B(o,t),o.reachedMaxHeight&&(o.reachedMaxHeight=!0,n.globalAlpha=o.petalAlpha,Y(o,t),n.globalAlpha=1,U(o,t)));n.globalAlpha=1,s=requestAnimationFrame(E)}}function V({plants:t,plantsAmount:n,x:o,y:a,petalAmount:l,petalAmountsMin:s,stemMaxHeight:r,isFirst:h,isLast:u,isTheOne:d}){const c={...N},[y,v]=function(e){let t=e[Math.floor(i.next()*e.length)],n=e[Math.floor(i.next()*e.length)];for(;t===n;)n=e[Math.floor(i.next()*e.length)];return[n,t]}([p,x,m,g,f,w,M,A]);c.startTime=e(i.next(),0,2e3,!1),c.stemWidth=e(i.next(),20,25),c.stemMaxHeight=r,c.petalAmount=l,c.petalAmountThreshold=n+s;let R=2.5;if(h||u?!h&&!u||d?d&&(c.centerMaxRadius=e(i.next(),150,170),c.petalMaxRadius=e(i.next(),150,160),c.stemMaxHeight=e(i.next(),.4,L,!1),c.petalAmount=e(i.next(),s,n+s),c.petalAmountThreshold=100):(c.centerMaxRadius=e(i.next(),35,45),c.petalMaxRadius=e(i.next(),35,45),c.stemMaxHeight=e(i.next(),.2,.3,!1),R=1):(c.centerMaxRadius=e(i.next(),90,140),c.petalMaxRadius=e(i.next(),100,120),c.petalAmount=e(i.next(),s,n+s)),c.stemColor=_(S,e(i.next(),30,40),e(i.next(),40,50)),c.centerColor=_(y,e(i.next(),60,80)),c.petalColor=_(v,e(i.next(),90,100)),c.stemGrowthSpeed=e(i.next(),.1,.5,!1),c.centerGrowthSpeed=e(i.next(),.05,.075,!1),c.petalGrowthSpeed=e(i.next(),.0125,.025,!1),c.leafPosition=e(i.next(),.65,1,!1),c.leafSize=e(i.next(),c.stemWidth+20*R,c.stemWidth+50*R),c.petalAngle=e(i.next(),0,180)*Math.PI/180,c.operation="source-over",c.petalAmount>=c.petalAmountThreshold&&(c.operation="screen",c.isSpecial=!0),"rainbowNight"===T){const t=Math.round(e(i.next(),0,1,!1));c.operation=0===t?"overlay":"difference",c.stemColor=_(c.stemColor,55,e(i.next(),10,20)),c.isSpecial=!0}c.y=a,c.x=o,t.push(c)}function B(e,t){n.fillStyle=e.stemColor||"rgba(255, 255, 255, .25)";let o=e.stemWidth/l*a.width,i=e.stemHeight/2048*a.height;n.fillRect(parseInt(e.x*a.width-o/2),e.y*a.height-i,parseInt(o),i);let s=e.y*a.height-i*(1-e.leafPosition),r=e.leafSize/l*a.width;n.beginPath(),n.moveTo(parseInt(e.x*a.width),s),n.lineTo(parseInt(e.x*a.width)-r,s-r/2),n.lineTo(parseInt(e.x*a.width)+r,s-r/2),n.fill(),i<2048*e.stemMaxHeight/l*a.height&&!e.reachedMaxHeight?e.stemHeight+=e.stemGrowthSpeed*t:e.reachedMaxHeight=!0,e.stemHeightFinal=i}function U(e,t){n.fillStyle=e.centerColor||"yellow";let o=e.centerRadius/l*a.width;n.beginPath(),n.arc(parseInt(e.x*a.width),parseInt(e.y*a.height)-e.stemHeightFinal,o,0,2*Math.PI),n.fill(),e.centerRadius<e.centerMaxRadius&&(e.centerRadius+=e.centerGrowthSpeed*t),e.centerRadiusFinal=o,n.globalCompositeOperation="source-over"}function Y(e,t){n.globalCompositeOperation=e.operation,n.fillStyle=e.petalColor||"pink",e.isSpecial&&(n.globalAlpha=1);let o=e.petalRadius/l*a.width;for(let t=0;t<e.petalAmount;t++)n.beginPath(),n.arc(parseInt(e.x*a.width)+(o+e.centerRadiusFinal/2)*Math.cos(e.petalAngle+t*Math.PI/(e.petalAmount/2)),parseInt(e.y*a.height)-e.stemHeightFinal+(o+e.centerRadiusFinal/2)*Math.sin(e.petalAngle+t*Math.PI/(e.petalAmount/2)),o,0,2*Math.PI),n.fill();e.petalRadius<e.petalMaxRadius&&(e.petalRadius+=e.petalGrowthSpeed*t),n.globalCompositeOperation="source-over"}function _(e,t,n){let[o,a,i]=e.match(/hsl\(\s*(\d+\.?\d*)\s*,\s*(\d+\.?\d*)%\s*,\s*(\d+\.?\d*)%\s*\)/).slice(1).map(Number);return void 0!==n&&(i=n),`hsl(${o}, ${t}%, ${i}%)`}function j(){h=e(i.next(),25,1e3,!0),u=e(i.next(),.05,50,!0),d=Math.floor(h*u),console.log(`redraw in ${d}ms`)}$.sort(((e,t)=>e.stemMaxHeight-t.stemMaxHeight)),s=requestAnimationFrame(E),console.log(fxhash),j(),function(e){const{plants:t,redrawInMs:n,plantsAmount:a,environment:i}=e;let l=0;for(let e=0;e<t.length;e++)l+=t[e].isSpecial?1:0;const s=o({currentValue:n,ranges:[{tarantula:[0,250]},{itsATrap:[250,1e3]},{schwifty:[1e3,5e3]},{thisIsTheWay:[5e3,15e3]},{sAllGoodMan:[15e3,2e4]},{theresAlwaysMoneyInTheBananaStand:[2e4,25e3]},{YouTurnYourselfAroundThatsWhatItsAllAbout:[25e3,3e4]},{dangerZone:[3e4,4e4]},{goGodGo:[4e4,42500]},{whatsMyAgeAgain:[42500,5e4]},{sayMyName:[5e4,55e3]},{winterIsComing:[55e3,59999]},{weHaveDoneTheImpossibleAndThatMakesUsMighty:[59999,6e4]}]});window.$fxhashFeatures={plantsAmount:a,firstRedraw:s,specialPlantsAmount:l,environment:i},window.$fxhashFeatures}({plants:$,redrawInMs:d,plantsAmount:k,environment:T}),console.log("$fxhashFeatures",window.$fxhashFeatures),isFxpreview?setTimeout((()=>{fxpreview()}),51e3):setTimeout((function t(){window.cancelAnimationFrame(s);for(const t of $)t.reachedMaxHeight=!1,t.stemHeight=0,t.petalRadius=0,t.centerRadius=0,t.stemGrowthSpeed=e(i.next(),.1,.5,!1),t.centerGrowthSpeed=e(i.next(),.05,.075,!1),t.petalGrowthSpeed=e(i.next(),.0125,.025,!1);j(),s=requestAnimationFrame(E),setTimeout(t,d)}),d)}({ctx:s,canvas:l,prng:a});const r=()=>{window.requestAnimationFrame(r)};r()})();